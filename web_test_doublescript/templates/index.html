<!DOCTYPE html>
<html>
<head>
    <title>脚本控制</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>脚本控制</h1>
    <button id="script1-btn">运行脚本1</button>
    <button id="script2-btn">运行脚本2</button>

    <script>
        $(document).ready(function() {
            // 初始化按钮状态
            $("#script1-btn").prop("disabled", false);
            $("#script2-btn").prop("disabled", false);

            // 监听脚本1按钮点击事件
            $("#script1-btn").click(function() {
                // 禁用脚本1按钮
                $(this).prop("disabled", true);
                // 检查脚本2是否在运行
                $.get("/check_status", { script: "script2" }, function(response) {
                    if (response.status === "running") {
                        // 停止脚本2
                        $.get("/stop_script", { script: "script2" }, function() {
                            // 运行脚本1
                            $.get("/run_script", { script: "script1" }, function() {
                                // 启用脚本1按钮
                                $("#script1-btn").prop("disabled", false);
                            });
                        });
                    } else {
                        // 运行脚本1
                        $.get("/run_script", { script: "script1" }, function() {
                            // 启用脚本1按钮
                            $("#script1-btn").prop("disabled", false);
                        });
                    }
                });
            });

            // 监听脚本2按钮点击事件
            $("#script2-btn").click(function() {
                // 禁用脚本2按钮
                $(this).prop("disabled", true);
                // 检查脚本1是否在运行
                $.get("/check_status", { script: "script1" }, function(response) {
                    if (response.status === "running") {
                        // 停止脚本1
                        $.get("/stop_script", { script: "script1" }, function() {
                            // 运行脚本2
                            $.get("/run_script", { script: "script2" }, function() {
                                // 启用脚本2按钮
                                $("#script2-btn").prop("disabled", false);
                            });
                        });
                    } else {
                        // 运行脚本2
                        $.get("/run_script", { script: "script2" }, function() {
                            // 启用脚本2按钮
                            $("#script2-btn").prop("disabled", false);
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>